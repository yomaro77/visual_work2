<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DrawPanel.html</title>
    <style>
        canvas{
            border: 1px dashed rgb(100, 100, 100);
        }
    </style>
</head>
<body>
    <h1>그림판</h1>
    <canvas id="myCanvas" width="500" height="500"></canvas>
    <br />
    <input type="color" id="inputColor" />
    <script>
        //canvas 요소의 참조값 얻어오기
        let canvas = document.querySelector("#myCanvas");
        //canvas 에 렌더링 할 수 있는 도구 (context) 의 참조값 얻어오기
        let context = canvas.getContext("2d");

        context.lineWidth = 10; //선의 굵기
        context.lineCap = "round"; //선의 시작과 끝을 둥글게
        context.lineJoin = "round"; //선의 교차점을 둥글게

        //선의 색상을 저장할 변수 만들고 "black" 으로 초기화
        let color = "black";
        context.strokeStyle = color; //선의 색상 지정하기

        /*
        context.beginPath(); //경로시작
        context.moveTo(100, 100); //이을점 시작
        context.lineTo(200, 200);
        context.lineTo(200, 100);
        context.lineTo(100, 100);
        context.stroke(); //선 그리기
        context.closePath(); //경로마무리
        */

        //현재 그림을 그리고 있는지 여부
        let idDraw = false; //초기값은 일단 false 로 지정

        canvas.addEventListener("mousedown", function(event){
        
            isDraw = true;
            if(isDraw == true){
                //이벤트가 일어난 곳의 좌표
                let x = event.offsetX;
                let y = event.offsetY;

                context.beginPath();
                context.moveTo(x, y);

                context.strokeStyle = color;
            }
        });

        //canvas 에 mousemove 이벤트 처리
        canvas.addEventListener("mousemove", function(event){
            //만일 현재 그림을 그리고 있는 상태 일 때 
            if(isDraw == true){
                //이벤트가 일어난 곳의 좌표
                let x = event.offsetX;
                let y = event.offsetY;
                console.log(`${x} x ${y}`);

                context.lineTo(x, y);
                context.stroke();
            }
        });

        canvas.addEventListener("mouseup", function(event){
            //더 이상 그려지지 않도록 상태값을 바꿔준다.
            isDraw = false;
        });

        document.querySelector("#inputColor").addEventListener("change", function(){
            color = this.value;
        });

    </script>
</body>
</html>